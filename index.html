<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#075e54">
<title>Chatbot Genit Full</title>
<style>
body { margin:0; font-family:sans-serif; background:#ece5dd; }
header { background:#075e54; color:#fff; padding:10px; display:flex; justify-content:space-between; align-items:center; }
.chat { padding:10px; height:70vh; overflow-y:auto; }
.bubble { padding:10px 15px; margin:5px; border-radius:10px; max-width:70%; position:relative; }
.user { background:#dcf8c6; margin-left:auto; }
.bot { background:#fff; margin-right:auto; }
footer { padding:10px; display:flex; background:#fff; }
input { flex:1; padding:10px; border:1px solid #ccc; border-radius:20px; 
  font-size: 18px;
}
button { margin-left:5px; padding:10px 15px; border:none; background:#075e54; color:#fff; border-radius:50%; 
  font-size: 18px;
}
.copy-btn { position:absolute; top:5px; right:5px; background:transparent; border:none; color:#555; cursor:pointer; font-size:12px; display:none; }
.bubble:hover .copy-btn { display:inline-block; }
.menu-popup { position:absolute; top:50px; right:10px; background:#fff; border:1px solid #ccc; border-radius:5px; display:none; flex-direction:column; min-width:150px; }
.menu-popup.show { display:flex; }
.menu-popup button, .menu-popup label { padding:10px; text-align:left; border:none; background:none; width:100%; cursor:pointer; font-size:18px; color: #000;
  
}
.menu-popup button:hover, .menu-popup label:hover { background:#f0f0f0; }
#editSection { display:none; padding:10px; }
textarea { width:100%; height:300px; font-family:monospace; }
#modalJawab { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; }
#modalJawab > div { background:#fff; padding:20px; border-radius:10px; width:80%; max-width:400px; text-align:center; }
</style>
</head>
<body>
<header>
  <span>Chatbot Genit</span>
  <span style="cursor:pointer;" onclick="toggleMenu()">⋮</span>
  <div id="menuPopup" class="menu-popup">
    <label>Upload Data
      <input type="file" accept="application/json" onchange="uploadData(event)" style="display:none;">
    </label>
    <button onclick="downloadData()">Download Data</button>
    <button onclick="switchMode()">Edit Data</button>
  </div>
</header>

<!-- Chat Section -->
<section id="chatSection">
  <div class="chat" id="chatBox"></div>
  <footer>
    <input id="userInput" type="text" placeholder="Ketik pesan..." />
    <button onclick="kirimPesan()">➤</button>
  </footer>
</section>

<!-- Edit Section -->
<section id="editSection">
  <h3>Edit Data Bot</h3>
  <textarea id="editor"></textarea><br>
  <button onclick="saveEditedData()">Simpan</button>
  <button onclick="switchMode()">Kembali ke Chat</button>
</section>

<!-- Modal Jawaban Baru -->
<!-- Modal Jawaban Baru -->
<div id="modalJawab" style="
  display:none;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.5);
  justify-content:center;
  align-items:center;
">
  <div style="
    background:#fff;
    padding:20px;
    border-radius:10px;
    width:90%;
    max-width:400px;
    text-align:center;
    box-shadow:0 5px 15px rgba(0,0,0,0.3);
    display:flex;
    flex-direction:column;
  ">
    <h3 style="margin-top:0;">Jawaban Baru</h3>
    <p id="pertanyaanBaru" style="font-style:italic; color:#333;"></p>
    <textarea id="inputJawabanBaru" placeholder="Tulis jawaban..." style="
      width:90%;
      padding:10px;
      margin:10px 0;
      resize: vertical;
      min-height:60px;
      border:1px solid #ccc;
      border-radius:5px;
      font-size:18px;
      font-family:sans-serif;
    "></textarea>
    <div style="display:flex; justify-content:flex-end; gap:10px;">
      <button onclick="simpanJawabanBaru()" style="
        padding:10px 15px;
        background:#075e54;
        color:#fff;
        border:none;
        border-radius:5px;
        cursor:pointer;
      ">Simpan</button>
      <button onclick="tutupModal()" style="
        padding:10px 15px;
        background:#ccc;
        color:#333;
        border:none;
        border-radius:5px;
        cursor:pointer;
      ">Batal</button>
    </div>
  </div>
</div>


<script src="botdata.js"></script>
<script src="script.js"></script>
<script>
  document.getElementById("editor").value = JSON.stringify(botRules, null, 2);
</script>
</body>
</html>